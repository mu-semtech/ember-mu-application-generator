{{!-- Page to list <%= entitiesName %> --}}
<div class="content">
  <h2 class="h2">{{show-models-link}} &lt; {{t (humanize '<%= entitiesName %>')}}</h2>
  {{#data-table
     content=model
     isLoading=isLoadingModel
     filter=filter
     sort=sort
     page=page
     size=size
     as |table|}}
    {{#table.content as |c|}}
      {{#c.header}}
        <%= attributes.map( (property) => {
        return `{{th-sortable field='${property.name}' currentSorting=sort label=(t '${property.name}')}}`
        } ).join('\n') %>
        <%= belongsToRelationships.map( (rel) => {
        return `{{th-sortable field='${rel.name}' currentSorting=sort label=(t '${rel.name}')}}`
        } ).join('\n') %>
        <th>{{!-- contains detail view action --}}</th>
        <th>{{!-- contains detail edit action --}}</th>
      {{/c.header}}
      {{#c.body as |row|}}
        <%= attributes.map( (property) => {
          if (property.kind == "language-string-set") {
            return `{{#with-rdfa-context tagName="td" model=row as |ctx|}}
                {{#each row.${property.name} as |langString|}}
                  <span property={{row.rdfaBindings.${property.name}}} lang="{{langString.language}}" content="{{langString.content}}">
                    <span class="language-string-set__content">"{{langString.content}}"</span><span class="language-string-set__language">@{{langString.language}}</span>
                  </span>
                {{/each}} {{/with-rdfa-context}}`;
                } else {
                return `{{#with-rdfa-context tagName="td" model=row as |ctx|}}{{ctx.get prop=${property.name}}}{{/with-rdfa-context}}`;
                }
                }).join('\n')
                %>
                <%= belongsToRelationships.map( (rel) =>
                `{{#with-rdfa-context tagName="td" model=row as |ctx|}}
                  {{#ctx.get prop="${rel.name}" useUri=true link-to="${rel.relRoute}.show" as |ctx val|}}{{val.stringRep}}{{/ctx.get}}
                {{/with-rdfa-context}}` ).join('\n') %>
                {{#with-rdfa-context tagName="td" model=row as |ctx|}}{{#rdfa/link-to link-to='<%= entitiesName %>.show' value=row property="foaf:page"}}{{t "Open"}}{{/rdfa/link-to}}{{/with-rdfa-context}}
        <%= readonly?'':`<td>{{link-to (t 'Edit') '${entitiesName}.edit' row}}</td>` %>
      {{/c.body}}
    {{/table.content}}
  {{/data-table}}

  <%= (readonly?'':`<div class="actions">{{#link-to "${entitiesName}.new" class="button" title=(t "Create new ${entityName}") tagName="button" }}{{t 'Create new ${entityName}'}}{{/link-to}}</div>`)%>
</div>
